<!DOCTYPE html>
<html>
<head>
<title>Post Install Configuration - Admin Info</title> <!-- change this to your title of choice-->
<!-- Best if you leave the style section alone. -->
<style> 
header {
    background-color: lightgray;
    text-align: center;
    font-size: 20px;
    color: black;
}
iframe {
    height:500px;
    float: left;
    width: 15%;
    padding-left:2.5%;
    padding-right:2.5%;
    overflow:hidden;
}
article{
    float: right;
    width: 70%;
    padding-right:5%;
}
table{
    text-align: center;
    padding: 5px;
}
th{
    background-color: lightgrey
}
td{
    border: 1px solid lightgray;
    word-wrap:break-word;
    min-width: 115px;
}
</style>
</head>
<header>
<h1>Admin Info: Post Install Configurations</h1>
</header>
<iframe src="D:git\oit-learning\TMPL\linklist.html" title="Nav Links"></iframe>
<article>
    <p>This document provides the steps that should be taken after the initial setup of the system.</p>
    <h2>On the CONTROL Node</h2> 
    <ol>
        <li>Add the compute node to the webmin interface of the controller node</li>
        <ol>
            <li>Log into the webmin interface at <a style="font-family: 'Lucida Console', monospace">https://[server-address]:10000</a></li>
            <li>Select the "webmin" drop down in the admin interface</li>
            <li>Select "webmin server index"</li>
            <li>Select "webmin server index"</li>
            <li>Select "register a new server"</li>
            <ol>
                <li>Enter the hostname for the compute server</li>
                <li>SSL Server? <a style="font-family:'Lucida Console', monospace">YES</a></li>
                <li>Ensure that "Check remote SSL certificate" is <i>unchecked</i></li>
            </ol>
            <li>Add the new server to the OIT_LEARNING group</li>
            <ul><li>If OIT-LEARNING doesn't exist, use the "create group" option</li></ul>
            <li>Select "Login via Webmin with username" and enter the username and password that you set for the compute server</li>
            <li>Make fast RPC Calls? <a style="font-family:'Lucida Console', monospace">DECIDE AUTOMATICALLY</a></li>
        </ol>
        <li>Cluster the webmin servers to centralize management</li>
        <ol>
            <li>Select the "cluster" drop down in the admin interface</li>
            <li>Select "cluster webmin servers"</li>
            <li>Select <a style="font-family:'Lucida Console', monospace">OIT-LEARNING</a> from the drop down next to the "Add servers in group" option</li>
        </ol>
        <li>Add the compute node to the Openstack environment (Still on the control node)</li>
        <ol>
            <li>Run the following command:</li>
            <ul><li style="font-family:'Lucida Console', monospace">sudo microstack add-compute</li></ul>
        </ol>
        <li>Copy or export the registration code that is generated as a result from the above command</li>
        <li>SSH into the compute node</li>
        <li>Run the following command:</li>
        <ul><li style="font-family:'Lucida Console', monospace">sudo microstack init --auto --compute --join [registration code, remove the square brackets*]</li></ul>
        <li>Log into Openstack Horizon and configure the system:</li>
        <ol>
            <li>Run the following command to get the admin password:</li>
            <ul><li style="font-family:'Lucida Console', monospace">sudo snap get microstack config.credentials.keystone-password</li></ul>
            <li>Head to the loopback address (127.0.0.1 - Horizon listens on port 80)</li>
            <li>Log into the system with the user "admin" and paste the value from 4.2 for password.</li>
            <li>Select <a style="font-family:'Lucida Console', monospace; background-color:lightgray">Project</a> > <a style="font-family:'Lucida Console', monospace; background-color:lightgray">Network</a> > <a style="font-family:'Lucida Console', monospace; background-color:lightgray">Networks</a> from the navigation menu on the left</li>
            <ol>
                <li>Rename the network <a style="font-family:'Lucida Console', monospace; background-color:lightgray">external</a> to <a style="font-family:'Lucida Console', monospace; background-color:lightgray">OIT-External</a></li>
                <li>Rename the network <a style="font-family:'Lucida Console', monospace; background-color:lightgray">test</a> to <a style="font-family:'Lucida Console', monospace; background-color:lightgray">OIT-Internal</a></li>
            </ol>
            <li>Select <a style="font-family:'Lucida Console', monospace; background-color:lightgray">Project</a> > <a style="font-family:'Lucida Console', monospace; background-color:lightgray">Network</a> > <a style="font-family:'Lucida Console', monospace; background-color:lightgray">Routers</a> from the navigation menu on the left</li>
            <ul><li>Rename the router <a style="font-family:'Lucida Console', monospace; background-color:lightgray">test-router</a> to <a style="font-family:'Lucida Console', monospace; background-color:lightgray">OIT-Router</a> </li></ul>
            <li>Select <a style="font-family:'Lucida Console', monospace; background-color:lightgray">Project</a> > <a style="font-family:'Lucida Console', monospace; background-color:lightgray">Network</a> > <a style="font-family:'Lucida Console', monospace; background-color:lightgray">Security Groups</a> from the navigation menu on the left</li>
            <ol>
                <li>Delete all rules for the default group</li>
                <li>Create a new security group <a style="font-family:'Lucida Console', monospace; background-color:lightgray">Network Accessible</a>**</li>
                <table>
                    <tr>
                        <th>Traffic Flow</th>
                        <th>IP Version</th>
                        <th>Protocols</th>
                        <th>Ports</th>
                        <th>Destination Address</th>
                        <th>Destination Security Group</th>
                        <th>Rule Description</th>
                    </tr>
                    <tr>
                        <td>Egress</td>
                        <td>IPv4</td>
                        <td>ANY</td>
                        <td>ANY</td>
                        <td>0.0.0.0/0</td>
                        <td> - </td>
                        <td>Allows all ports, protocols, and destinations outbound</td>
                    </tr>
                    <tr>
                        <td>Ingress</td>
                        <td>IPv4</td>
                        <td>ANY</td>
                        <td>ANY</td>
                        <td>0.0.0.0/0</td>
                        <td> - </td>
                        <td>Allows all ports, protocols, and destinations inbound</td>
                    </tr>
                </table>
                <li>Modify the default group to only allow egress to machines within Openstack, and Ingress from anywhere.</li>
                <table>
                    <tr>
                        <th>Traffic Flow</th>
                        <th>IP Version</th>
                        <th>Protocols</th>
                        <th>Ports</th>
                        <th>Destination Address</th>
                        <th>Destination Security Group</th>
                        <th>Rule Description</th>
                    </tr>
                    <tr>
                        <td>Egress</td>
                        <td>IPv4</td>
                        <td>ANY</td>
                        <td>ANY</td>
                        <td> - </td>
                        <td> default </td>
                        <td>Allows outbound traffic from members of the <a style="font-family:'Lucida Console', monospace; background-color:lightgray">default</a> group to any other members of the <a style="font-family:'Lucida Console', monospace; background-color:lightgray">default</a> group.</td>
                    </tr>
                    <tr>
                        <td>Egress</td>
                        <td>IPv4</td>
                        <td>ANY</td>
                        <td>ANY</td>
                        <td> - </td>
                        <td> Network-Accessible </td>
                        <td>Allows outbound traffic from members of the <a style="font-family:'Lucida Console', monospace; background-color:lightgray">default</a> group to any members of the <a style="font-family:'Lucida Console', monospace; background-color:lightgray">Network-Accessible</a></td>
                    </tr>
                    <tr>
                        <td>Ingress</td>
                        <td>IPv4</td>
                        <td>ANY</td>
                        <td>ANY</td>
                        <td>0.0.0.0/0</td>
                        <td> - </td>
                        <td>Allows all ports, protocols, and destinations inbound</td>
                    </tr>
                </table>
            </ol>
        </ol>
    </ol>
    <p>*3d. EXAMPLE: <a style="font-family:'Lucida Console', monospace">sudo mircostack init --auto --compute join hKhob3N0bmFtZa4xOTIuMTY4LjY5LjE1MKtmaW4nZZXJwcmludMQgLtCqONYF9h9zOWgMAHNhZE+23/f4INfWZr2NkblX/jP+iaWTZIGRjMjA2OTFjZWE2mjRj)TRhYWY1Y2ExNWIyZTBhNDMwpnNlY3JldNkgZ0oozbDVvdkZpUFlnUFBsUWxlMnFqd1hPSE1yZHNpckg=</a></p>
    <p>**7.6.2/7.6.3 To get the <a style="font-family:'Lucida Console', monospace; background-color:lightgray">ANY</a> value in a field, select <a style="font-family:'Lucida Console', monospace; background-color:lightgray">Other Protocol</a> from the Rule drop down in the add rule menu. For the value of <a style="font-family:'Lucida Console', monospace; background-color:lightgray">IP Protocol</a> enter "-1"</p>
</article>
</html>